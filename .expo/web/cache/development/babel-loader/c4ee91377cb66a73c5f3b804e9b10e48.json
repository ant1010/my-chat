{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { useEffect } from 'react';\nimport useCachedResources from \"./hooks/useCachedResources\";\nimport useColorScheme from \"./hooks/useColorScheme\";\nimport Navigation from \"./navigation\";\nimport { getUser } from \"./src/graphql/queries\";\nimport { createUser } from \"./src/graphql/mutations\";\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\nimport awsconfig from \"./src/aws-exports\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsconfig), {}, {\n  Analytics: {\n    disabled: true\n  }\n}));\nvar randomImages = ['https://img.favpng.com/25/7/23/computer-icons-user-profile-avatar-image-png-favpng-LFqDyLRhe3PBXM0sx2LufsGFU.jpg', 'https://e7.pngegg.com/pngimages/550/997/png-clipart-user-icon-foreigners-avatar-child-face.png', 'https://www.clipartmax.com/png/middle/100-1005846_waiter-free-icon-avatar-profile-circle-png.png', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ9z7LTJsUq3rmFG9YrxvzZCKe09bkJLT2LO7mhVadfMJnHbPcvfIr8Oj24GNnmjnSRboc&usqp=CAU', 'https://www.clipartmax.com/png/middle/144-1442871_avatar-female-person-user-woman-young-icon-avatar-sport.png'];\n\nfunction App() {\n  var isLoadingComplete = useCachedResources();\n  var colorScheme = useColorScheme();\n\n  var getRandomImage = function getRandomImage() {\n    return randomImages[Math.floor(Math.random() * randomImages.length)];\n  };\n\n  useEffect(function () {\n    var fetchUser = function fetchUser() {\n      var userInfo, userData, newUser;\n      return _regeneratorRuntime.async(function fetchUser$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Auth.currentAuthenticatedUser({\n                bypassCache: true\n              }));\n\n            case 2:\n              userInfo = _context.sent;\n              console.log(userInfo);\n\n              if (!userInfo) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(getUser, {\n                id: userInfo.attributes.sub\n              })));\n\n            case 7:\n              userData = _context.sent;\n              console.log(userData);\n\n              if (!userData.data.getUser) {\n                _context.next = 12;\n                break;\n              }\n\n              console.log(\"USer already exxxiiissts\");\n              return _context.abrupt(\"return\");\n\n            case 12:\n              newUser = {\n                id: userInfo.attributes.sub,\n                name: userInfo.username,\n                imageUri: getRandomImage(),\n                status: \"hey, iam on whatsapp\"\n              };\n              console.log(\"new User\");\n              _context.next = 16;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(createUser, {\n                input: newUser\n              })));\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchUser();\n  }, []);\n\n  if (!isLoadingComplete) {\n    return null;\n  } else {\n    return _jsxs(SafeAreaProvider, {\n      children: [_jsx(Navigation, {\n        colorScheme: colorScheme\n      }), _jsx(StatusBar, {})]\n    });\n  }\n}\n\nexport default withAuthenticator(App);","map":{"version":3,"sources":["/Users/antonyarreola/Documents/GitHub/whatsapp-clone/App.tsx"],"names":["StatusBar","SafeAreaProvider","useEffect","useCachedResources","useColorScheme","Navigation","getUser","createUser","withAuthenticator","Amplify","Auth","API","graphqlOperation","awsconfig","configure","Analytics","disabled","randomImages","App","isLoadingComplete","colorScheme","getRandomImage","Math","floor","random","length","fetchUser","currentAuthenticatedUser","bypassCache","userInfo","console","log","graphql","id","attributes","sub","userData","data","newUser","name","username","imageUri","status","input"],"mappings":";;;;;;;AAAA,SAASA,SAAT,QAA0B,iBAA1B;AACA,SAASC,gBAAT,QAAiC,gCAAjC;AACA,SAAQC,SAAR,QAAwB,OAAxB;AACA,OAAOC,kBAAP;AACA,OAAOC,cAAP;AACA,OAAOC,UAAP;AACA,SAAQC,OAAR;AACA,SAAQC,UAAR;AAIA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,OAAOC,OAAP,IAAkBC,IAAlB,EAAwBC,GAAxB,EAA4BC,gBAA5B,QAAmD,aAAnD;AACA,OAAOC,SAAP;;;AACAJ,OAAO,CAACK,SAAR,iCACKD,SADL;AAEEE,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE;AADD;AAFb;AAMA,IAAMC,YAAY,GAAG,CACnB,kHADmB,EAEnB,gGAFmB,EAGnB,kGAHmB,EAInB,sIAJmB,EAKnB,+GALmB,CAArB;;AASC,SAASC,GAAT,GAAe;AACd,MAAMC,iBAAiB,GAAGhB,kBAAkB,EAA5C;AACA,MAAMiB,WAAW,GAAGhB,cAAc,EAAlC;;AAEA,MAAMiB,cAAc,GAAG,SAAjBA,cAAiB,GAAK;AACxB,WAAOJ,YAAY,CAACK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBP,YAAY,CAACQ,MAAxC,CAAD,CAAnB;AACH,GAFD;;AAGFvB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMwB,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACMhB,IAAI,CAACiB,wBAAL,CAA8B;AAACC,gBAAAA,WAAW,EAAC;AAAb,eAA9B,CADN;;AAAA;AACXC,cAAAA,QADW;AAElBC,cAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AAFkB,mBAGdA,QAHc;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAIOlB,GAAG,CAACqB,OAAJ,CAAYpB,gBAAgB,CAACN,OAAD,EAAS;AAAC2B,gBAAAA,EAAE,EAACJ,QAAQ,CAACK,UAAT,CAAoBC;AAAxB,eAAT,CAA5B,CAJP;;AAAA;AAIVC,cAAAA,QAJU;AAUhBN,cAAAA,OAAO,CAACC,GAAR,CAAYK,QAAZ;;AAVgB,mBAWbA,QAAQ,CAACC,IAAT,CAAc/B,OAXD;AAAA;AAAA;AAAA;;AAYdwB,cAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AAZc;;AAAA;AAeVO,cAAAA,OAfU,GAeA;AACdL,gBAAAA,EAAE,EAACJ,QAAQ,CAACK,UAAT,CAAoBC,GADT;AAEdI,gBAAAA,IAAI,EAAEV,QAAQ,CAACW,QAFD;AAGdC,gBAAAA,QAAQ,EAAEpB,cAAc,EAHV;AAIdqB,gBAAAA,MAAM,EAAC;AAJO,eAfA;AAqBhBZ,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AArBgB;AAAA,+CAsBVpB,GAAG,CAACqB,OAAJ,CAAYpB,gBAAgB,CAACL,UAAD,EAAY;AAACoC,gBAAAA,KAAK,EAACL;AAAP,eAAZ,CAA5B,CAtBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAyBAZ,IAAAA,SAAS;AACV,GA3BQ,EA2BP,EA3BO,CAAT;;AAkCE,MAAI,CAACP,iBAAL,EAAwB;AACtB,WAAO,IAAP;AACD,GAFD,MAEO;AACL,WACE,MAAC,gBAAD;AAAA,iBACE,KAAC,UAAD;AAAY,QAAA,WAAW,EAAEC;AAAzB,QADF,EAEE,KAAC,SAAD,KAFF;AAAA,MADF;AAMD;AACF;;AACD,eAAeZ,iBAAiB,CAACU,GAAD,CAAhC","sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport {useEffect }from 'react';\nimport useCachedResources from './hooks/useCachedResources';\nimport useColorScheme from './hooks/useColorScheme';\nimport Navigation from './navigation';\nimport {getUser} from './src/graphql/queries';\nimport {createUser} from './src/graphql/mutations';\n\n\n// @ts-ignore\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport Amplify, { Auth ,API,graphqlOperation} from 'aws-amplify'\nimport awsconfig from './src/aws-exports'\nAmplify.configure({\n  ...awsconfig,\n  Analytics: { \n    disabled: true\n  }\n});\nconst randomImages = [\n  'https://img.favpng.com/25/7/23/computer-icons-user-profile-avatar-image-png-favpng-LFqDyLRhe3PBXM0sx2LufsGFU.jpg',\n  'https://e7.pngegg.com/pngimages/550/997/png-clipart-user-icon-foreigners-avatar-child-face.png',\n  'https://www.clipartmax.com/png/middle/100-1005846_waiter-free-icon-avatar-profile-circle-png.png',\n  'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ9z7LTJsUq3rmFG9YrxvzZCKe09bkJLT2LO7mhVadfMJnHbPcvfIr8Oj24GNnmjnSRboc&usqp=CAU',\n  'https://www.clipartmax.com/png/middle/144-1442871_avatar-female-person-user-woman-young-icon-avatar-sport.png'\n\n  \n]\n function App() {\n  const isLoadingComplete = useCachedResources();\n  const colorScheme = useColorScheme();\n\n  const getRandomImage = () =>{\n      return randomImages[Math.floor(Math.random() * randomImages.length)];\n  }\nuseEffect(() => {\n  const fetchUser = async () => {\n   const userInfo = await Auth.currentAuthenticatedUser({bypassCache:true});\n  console.log(userInfo);\n   if(userInfo){\n    const userData = await API.graphql(graphqlOperation(getUser,{id:userInfo.attributes.sub}))\n  //  const userData = await API.graphql({\n  //     query: getUser,\n  //     variables: {id: userInfo.attributes.sub},\n  //     authMode: 'AMAZON_COGNITO_USER_POOLS'\n  //   })\n    console.log(userData);\n    if(userData.data.getUser){\n      console.log(\"USer already exxxiiissts\");\n      return;\n    }\n    const newUser = {\n      id:userInfo.attributes.sub,\n      name: userInfo.username,\n      imageUri: getRandomImage(),\n      status:\"hey, iam on whatsapp\"\n    }\n    console.log(\"new User\")\n    await API.graphql(graphqlOperation(createUser,{input:newUser}));\n   }\n  }\n  fetchUser();\n},[])\n\n\n  \n  \n\n\n  if (!isLoadingComplete) {\n    return null;\n  } else {\n    return (\n      <SafeAreaProvider>\n        <Navigation colorScheme={colorScheme} />\n        <StatusBar />\n      </SafeAreaProvider>\n    );\n  }\n}\nexport default withAuthenticator(App)"]},"metadata":{},"sourceType":"module"}