{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport React, { useEffect } from 'react';\nimport useCachedResources from \"./hooks/useCachedResources\";\nimport useColorScheme from \"./hooks/useColorScheme\";\nimport Navigation from \"./navigation\";\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\nimport awsconfig from \"./src/aws-exports\";\nimport { getUser } from \"./src/graphql/queries\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nAmplify.configure(awsconfig);\n\nfunction App() {\n  var isLoadingComplete = useCachedResources();\n  var colorScheme = useColorScheme();\n  useEffect(function () {\n    var fetchUser = function fetchUser() {\n      var userInfo, userData;\n      return _regeneratorRuntime.async(function fetchUser$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Auth.currentAuthenticatedUser({\n                bypassCache: true\n              }));\n\n            case 2:\n              userInfo = _context.sent;\n              console.log(userInfo);\n\n              if (!userInfo) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(getUser, {\n                id: userInfo.attributes.sub\n              })));\n\n            case 7:\n              userData = _context.sent;\n\n              if (userData.data.getUser) {\n                console.log(\"user already in database\");\n              }\n\n              console.log(userData);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchUser();\n  }, []);\n\n  if (!isLoadingComplete) {\n    return null;\n  } else {\n    return _jsxs(SafeAreaProvider, {\n      children: [_jsx(Navigation, {\n        colorScheme: colorScheme\n      }), _jsx(StatusBar, {})]\n    });\n  }\n}\n\nexport default withAuthenticator(App);","map":{"version":3,"sources":["/Users/antonyarreola/Documents/GitHub/whatsapp-clone/App.tsx"],"names":["StatusBar","SafeAreaProvider","React","useEffect","useCachedResources","useColorScheme","Navigation","withAuthenticator","Amplify","Auth","API","graphqlOperation","awsconfig","getUser","configure","App","isLoadingComplete","colorScheme","fetchUser","currentAuthenticatedUser","bypassCache","userInfo","console","log","graphql","id","attributes","sub","userData","data"],"mappings":";AAAA,SAASA,SAAT,QAA0B,iBAA1B;AACA,SAASC,gBAAT,QAAiC,gCAAjC;AACA,OAAOC,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,kBAAP;AACA,OAAOC,cAAP;AACA,OAAOC,UAAP;AAEA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,OAAOC,OAAP,IAAkBC,IAAlB,EAAuBC,GAAvB,EAA2BC,gBAA3B,QAAmD,aAAnD;AACA,OAAOC,SAAP;AACA,SAAQC,OAAR;;;AACAL,OAAO,CAACM,SAAR,CAAkBF,SAAlB;;AAEC,SAASG,GAAT,GAAe;AACd,MAAMC,iBAAiB,GAAGZ,kBAAkB,EAA5C;AACA,MAAMa,WAAW,GAAGZ,cAAc,EAAlC;AAEAF,EAAAA,SAAS,CAAE,YAAM;AACf,QAAMe,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEOT,IAAI,CAACU,wBAAL,CAA8B;AAACC,gBAAAA,WAAW,EAAC;AAAb,eAA9B,CAFP;;AAAA;AAEVC,cAAAA,QAFU;AAGhBC,cAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AAHgB,mBAKbA,QALa;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAMSX,GAAG,CAACc,OAAJ,CACrBb,gBAAgB,CACdE,OADc,EAEd;AAACY,gBAAAA,EAAE,EAAEJ,QAAQ,CAACK,UAAT,CAAoBC;AAAzB,eAFc,CADK,CANT;;AAAA;AAMRC,cAAAA,QANQ;;AAYd,kBAAGA,QAAQ,CAACC,IAAT,CAAchB,OAAjB,EAAyB;AACrBS,gBAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACH;;AACDD,cAAAA,OAAO,CAACC,GAAR,CAAYK,QAAZ;;AAfc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAkBAV,IAAAA,SAAS;AACV,GApBQ,EAoBP,EApBO,CAAT;;AAsBA,MAAI,CAACF,iBAAL,EAAwB;AACtB,WAAO,IAAP;AACD,GAFD,MAEO;AACL,WACE,MAAC,gBAAD;AAAA,iBACE,KAAC,UAAD;AAAY,QAAA,WAAW,EAAEC;AAAzB,QADF,EAEE,KAAC,SAAD,KAFF;AAAA,MADF;AAMD;AACF;;AACD,eAAeV,iBAAiB,CAACQ,GAAD,CAAhC","sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport React,{useEffect} from 'react';\nimport useCachedResources from './hooks/useCachedResources';\nimport useColorScheme from './hooks/useColorScheme';\nimport Navigation from './navigation';\n// @ts-ignore\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport Amplify, { Auth,API,graphqlOperation } from 'aws-amplify'\nimport awsconfig from './src/aws-exports'\nimport {getUser} from './src/graphql/queries';\nAmplify.configure(awsconfig)\n\n function App() {\n  const isLoadingComplete = useCachedResources();\n  const colorScheme = useColorScheme();\n//@ts-ignore\n  useEffect( () => {\n    const fetchUser = async () => {\n      // get auth user\n      const userInfo = await Auth.currentAuthenticatedUser({bypassCache:true});\n      console.log(userInfo);\n\n      if(userInfo){\n        const userData = await API.graphql(\n          graphqlOperation(\n            getUser,\n            {id: userInfo.attributes.sub}\n          )\n        )\n        if(userData.data.getUser){\n            console.log(\"user already in database\")\n        }\n        console.log(userData);\n      }\n    }\n    fetchUser();\n  },[])\n\n  if (!isLoadingComplete) {\n    return null;\n  } else {\n    return (\n      <SafeAreaProvider>\n        <Navigation colorScheme={colorScheme} />\n        <StatusBar />\n      </SafeAreaProvider>\n    );\n  }\n}\nexport default withAuthenticator(App)"]},"metadata":{},"sourceType":"module"}